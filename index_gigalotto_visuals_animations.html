
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>GIGA LOTTO: $2.2B Challenge</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap">
  <script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
  <style>
    body {
      background: url("https://www.transparenttextures.com/patterns/asfalt-dark.png");
      font-family: 'Press Start 2P', cursive;
      color: #111;
      background-color: #d0d0ff;
      margin: 0;
      padding: 0;
      text-align: center;
    }
    header {
      background: linear-gradient(#00f, #88f);
      padding: 20px;
      color: white;
      box-shadow: 0 3px 6px rgba(0,0,0,0.3);
      position: relative;
    }
    .header-glow {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: radial-gradient(circle, rgba(255,255,255,0.6) 0%, transparent 70%);
      pointer-events: none;
    }
    .container {
      max-width: 800px;
      margin: 20px auto;
      background: #fffbe8;
      border: 5px double #444;
      padding: 20px;
      box-shadow: 0 0 15px rgba(0,0,0,0.2);
      position: relative;
      overflow: hidden;
    }
    .container::before {
      content: "";
      position: absolute;
      top: -10px;
      left: -10px;
      right: -10px;
      bottom: -10px;
      border: 2px solid #ff0;
      border-radius: 5px;
      z-index: -1;
      animation: pulse 3s infinite;
    }
    h1 {
      font-size: 1.5em;
      color: #222;
      text-shadow: 0 0 5px rgba(255,255,0,0.7);
    }
    .jackpot-display {
      background: #e0ffe0;
      border: 2px dashed #0a0;
      padding: 15px;
      margin-top: 20px;
      font-size: 1.2em;
      position: relative;
    }
    .progress-bar {
      background: #ccc;
      border: 2px inset #999;
      height: 25px;
      position: relative;
      margin: 10px auto;
      width: 100%;
    }
    .progress-fill {
      height: 100%;
      background: repeating-linear-gradient(45deg, #0f0, #0f0 10px, #afa 10px, #afa 20px);
      width: 0%;
      transition: width 0.5s ease;
    }
    .wallet {
      background: #f0f8ff;
      border: 2px solid #00c;
      padding: 10px;
      margin-top: 20px;
    }
    .user-dashboard {
      background: #eef;
      padding: 10px;
      margin-top: 20px;
      border: 2px solid #009;
    }
    .actions {
      margin: 20px 0;
    }
    button {
      background: #00c;
      color: #fff;
      font-size: 1em;
      border: 2px solid #000;
      padding: 10px 20px;
      cursor: pointer;
      box-shadow: 2px 2px #888;
      margin: 5px;
      font-family: 'Press Start 2P', cursive;
      transition: all 0.2s;
    }
    button:hover {
      background: #00f;
      transform: translateY(-2px);
      box-shadow: 3px 3px #666;
    }
    button:active {
      transform: translateY(1px);
      box-shadow: 1px 1px #aaa;
    }
    #withdrawBtn {
      background: linear-gradient(#0f0, #080);
    }
    #requestDrawBtn {
      background: linear-gradient(#f90, #f60);
    }
    footer {
      font-size: 0.6em;
      margin: 30px auto;
      color: #444;
    }
    #status {
      background: #ffd;
      padding: 15px;
      margin: 20px 0;
      border: 2px solid #aa0;
      font-size: 0.9em;
    }
    input {
      padding: 10px;
      font-family: 'Press Start 2P', cursive;
      border: 2px inset #999;
      margin: 10px;
      width: 200px;
    }
    .winner-banner {
      background: linear-gradient(90deg, #ff0, #f90, #ff0);
      padding: 10px;
      margin: 10px 0;
      border: 3px solid #f90;
      animation: shine 2s infinite;
    }
    @keyframes shine {
      0% { box-shadow: 0 0 5px #ff0; }
      50% { box-shadow: 0 0 20px #ff0; }
      100% { box-shadow: 0 0 5px #ff0; }
    }
    @keyframes pulse {
      0% { box-shadow: 0 0 5px rgba(255,255,0,0.5); }
      50% { box-shadow: 0 0 20px rgba(255,255,0,0.8); }
      100% { box-shadow: 0 0 5px rgba(255,255,0,0.5); }
    }
  </style>

  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üé∞</text></svg>">

<!-- Arcade Background Music -->
<audio id="bgMusic" src="https://assets.mixkit.co/music/preview/mixkit-arcade-retro-game-4.mp3" loop></audio>
<button id="toggleMusic" style="position:fixed;bottom:50px;right:10px;z-index:999;">üéµ Music: On</button>

<style>
  .glow-border { box-shadow: 0 0 20px gold; transition: box-shadow 0.5s ease-in-out; }
  .hot-flame { box-shadow: 0 0 30px red, 0 0 50px orange inset; animation: flicker 1s infinite alternate; }
  @keyframes flicker {
    0% { box-shadow: 0 0 30px red, 0 0 40px orange inset; }
    100% { box-shadow: 0 0 40px red, 0 0 60px yellow inset; }
  }

  #slotSpinner {
    font-size: 40px;
    animation: spinReel 1s infinite linear;
    display: inline-block;
    margin-bottom: 10px;
  }

  @keyframes spinReel {
    0% { transform: rotateX(0deg); }
    100% { transform: rotateX(360deg); }
  }

  .coin-burst {
    position: absolute;
    top: 100px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 40px;
    animation: dropCoins 0.6s ease-out forwards;
    pointer-events: none;
  }

  @keyframes dropCoins {
    0% { opacity: 1; transform: translate(-50%, -50px) scale(1); }
    100% { opacity: 0; transform: translate(-50%, 100px) scale(1.5); }
  }
</style>

</head>
<body>
  <header>
    <div class="header-glow"></div>
    <h1>ü§ë GIGA LOTTO - $2.2B CHALLENGE ü§ë</h1>
    <p>The lottery that only draws when crypto makes history</p>
  </header>
  <div class="container">
    <div class="jackpot-display">
      <strong>üí∞ Jackpot Pool:</strong> <span id="jackpot">Loading...</span><br>
      <strong>üéØ Target:</strong> $2.2B USD<br>
      <strong>üìà Holding Above Target For:</strong> <span id="holdTimer">--:--:--</span>
      <div class="progress-bar">
        <div class="progress-fill" id="progressFill"></div>
      </div>
    </div>
    <div class="jackpot-display">
      <strong>üî• USD Deposited Last 24h:</strong> <span id="usd24h">Loading...</span> USD
    </div>
    <div class="wallet">
      <p><strong>üéüÔ∏è Enter the Pot</strong></p>
      <input type="number" id="ethAmount" placeholder="Amount in ETH" step="0.001" />
      <button id="connectBtn">üîå Connect Wallet</button>
    </div>
    <div class="user-dashboard" id="userDashboard" style="display:none;">
      <p><strong>Connected:</strong> <span id="userAddress"></span></p>
      <p><strong>Your Total Deposits:</strong> <span id="userDeposit">0</span> ETH</p>
    </div>
    <div class="actions">
      <button id="withdrawBtn" style="display:none;">Withdraw Winnings</button>
      <button id="requestDrawBtn" style="display:none;">Request Draw</button>
    </div>
    <div id="status">Not connected</div>
  </div>
  <footer>
    <p>Contract verified | Non-custodial | Transparent rules | Community driven</p>
    <p>&copy; 2025 GIGA LOTTO Project</p>
  </footer>
  




<script defer>
  document.addEventListener("DOMContentLoaded", () => {
    console.log("‚úÖ DOM loaded");

    const statusDiv = document.getElementById("status");
    const connectBtn = document.getElementById("connectBtn");
    const ethInput = document.getElementById("ethAmount");

    let web3;
    let userAccount;
    const contractAddress = "0xF5aEA51f7fAaABe16Fd3c14Da9Fa90e223D41404";
    const abi = [
      {
        "inputs": [],
        "name": "deposit",
        "outputs": [],
        "stateMutability": "payable",
        "type": "function"
      },
      {
        "inputs": [{"internalType": "address", "name": "", "type": "address"}],
        "name": "userDeposits",
        "outputs": [{"internalType": "uint256", "name": "", "type": "uint256"}],
        "stateMutability": "view",
        "type": "function"
      }
    ];
    let contract;

    connectBtn.addEventListener("click", async () => {
      if (!userAccount) {
        // CONNECT logic
        console.log("üîå Connect button clicked");

        if (!window.ethereum) {
          statusDiv.innerText = "‚ö†Ô∏è Please install MetaMask!";
          return;
        }

        try {
          await window.ethereum.request({ method: 'eth_requestAccounts' });
          web3 = new Web3(window.ethereum);
          const accounts = await web3.eth.getAccounts();
          userAccount = accounts[0];
          contract = new web3.eth.Contract(abi, contractAddress);
          console.log("‚úÖ Connected to:", userAccount);

          document.getElementById("userAddress").innerText =
            userAccount.substring(0, 6) + "..." + userAccount.substring(38);
          document.getElementById("userDashboard").style.display = "block";
          statusDiv.innerText = `‚úÖ Connected: ${userAccount}`;
          connectBtn.textContent = "üí∏ Deposit";
        } catch (err) {
          console.error("‚ùå Connection error:", err);
          statusDiv.innerText = `‚ö†Ô∏è Error: ${err.message}`;
        }
      } else {
        // DEPOSIT logic
        const ethAmount = ethInput.value;
        if (!ethAmount || parseFloat(ethAmount) <= 0) {
          statusDiv.innerText = "‚ö†Ô∏è Enter a valid ETH amount.";
          return;
        }

        try {
          const valueInWei = web3.utils.toWei(ethAmount, "ether");
          statusDiv.innerText = "‚è≥ Processing deposit...";

          await contract.methods.deposit().send({
            from: userAccount,
            value: valueInWei
          });

          statusDiv.innerText = "‚úÖ Deposit successful!";
          const deposited = await contract.methods.userDeposits(userAccount).call();
          document.getElementById("userDeposit").innerText =
            web3.utils.fromWei(deposited, "ether");
        } catch (err) {
          console.error("‚ùå Deposit error:", err);
          statusDiv.innerText = `‚ö†Ô∏è Deposit failed: ${err.message}`;
        }
      }
    });
  });
</script>


<!-- Share Modal -->
<div id="shareModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background-color:rgba(0,0,0,0.7); z-index:1000; align-items:center; justify-content:center;">
  <div style="background:#fff; padding:20px; border-radius:10px; text-align:center; width:90%; max-width:400px; position:relative;">
    <h3>üéâ Share GIGA LOTTO</h3>
    <p>Help us reach the $2.2B target!</p>
    <a id="tweetBtn" target="_blank" style="display:inline-block; margin:10px; padding:10px 20px; background:#1da1f2; color:#fff; text-decoration:none; border-radius:5px;">
      üê¶ Share on Twitter
    </a>
    <br/>
    <button onclick="document.getElementById('shareModal').style.display='none'" style="margin-top:10px;">Close</button>
  </div>
</div>

<script>
  const updateExtras = async () => {
    try {
      const web3 = new Web3(window.ethereum);
      const contractAddress = "0xF5aEA51f7fAaABe16Fd3c14Da9Fa90e223D41404";
      const abi = [
        { "inputs": [], "name": "deposit", "outputs": [], "stateMutability": "payable", "type": "function" },
        { "inputs": [{"internalType": "address", "name": "", "type": "address"}], "name": "userDeposits", "outputs": [{"internalType": "uint256", "name": "", "type": "uint256"}], "stateMutability": "view", "type": "function" },
        { "inputs": [], "name": "totalPool", "outputs": [{"internalType": "uint256", "name": "", "type": "uint256"}], "stateMutability": "view", "type": "function" },
        { "inputs": [], "name": "getJackpotUsd", "outputs": [{"internalType": "uint256", "name": "", "type": "uint256"}], "stateMutability": "view", "type": "function" },
        { "inputs": [], "name": "TARGET_USD", "outputs": [{"internalType": "uint256", "name": "", "type": "uint256"}], "stateMutability": "view", "type": "function" },
        { "inputs": [], "name": "holdStartTimestamp", "outputs": [{"internalType": "uint256", "name": "", "type": "uint256"}], "stateMutability": "view", "type": "function" }
      ];
      const contract = new web3.eth.Contract(abi, contractAddress);
      const [eth, usd, target] = await Promise.all([
        contract.methods.totalPool().call(),
        contract.methods.getJackpotUsd().call(),
        contract.methods.TARGET_USD().call()
      ]);
      const ethJackpot = web3.utils.fromWei(eth, "ether");
      const usdJackpot = parseFloat(usd);
      const targetUsd = parseFloat(target);

      document.getElementById("jackpot").innerText = `${ethJackpot} ETH (${(usdJackpot/1e8).toFixed(2)} USD)`;
      document.getElementById("progressFill").style.width = Math.min((usdJackpot / targetUsd) * 100, 100) + "%";

      if (usdJackpot >= targetUsd) {
        const start = await contract.methods.holdStartTimestamp().call();
        const now = Math.floor(Date.now() / 1000);
        const diff = now - parseInt(start);
        const h = Math.floor(diff / 3600).toString().padStart(2, '0');
        const m = Math.floor((diff % 3600) / 60).toString().padStart(2, '0');
        const s = (diff % 60).toString().padStart(2, '0');
        document.getElementById("holdTimer").innerText = `${h}:${m}:${s}`;
      } else {
        document.getElementById("holdTimer").innerText = "--:--:--";
      }

      const accounts = await web3.eth.getAccounts();
      if (accounts.length > 0) {
        const userDeposit = await contract.methods.userDeposits(accounts[0]).call();
        const percentShare = ((userDeposit / eth) * 100).toFixed(2);
        const depositElem = document.getElementById("userDeposit");
        if (depositElem) depositElem.innerText = web3.utils.fromWei(userDeposit, "ether");
        const statusElem = document.getElementById("status");
        if (statusElem) statusElem.innerHTML += `<br/>üéØ Your Jackpot Chance: ${isNaN(percentShare) ? "0" : percentShare}%`;
      }

    } catch (e) {
      console.error("Jackpot/UI update error:", e);
    }
  };

  window.addEventListener("load", updateExtras);
</script>

<audio id="coinSound" src="https://assets.mixkit.co/sfx/preview/mixkit-arcade-retro-coin-207.mp3"></audio>
<audio id="errorSound" src="https://assets.mixkit.co/sfx/preview/mixkit-wrong-answer-fail-notification-946.mp3"></audio>
<button id="toggleSound" style="position:fixed;bottom:10px;right:10px;z-index:999;">üîä Sound: On</button>
<style>
  .glow-border { box-shadow: 0 0 20px gold; transition: box-shadow 0.5s ease-in-out; }
</style>

<script>
  let soundOn = true;
  const coinSound = document.getElementById("coinSound");
  const errorSound = document.getElementById("errorSound");
  const toggleBtn = document.getElementById("toggleSound");

  toggleBtn.addEventListener("click", () => {
    soundOn = !soundOn;
    toggleBtn.innerText = soundOn ? "üîä Sound: On" : "üîá Sound: Off";
  });

  function playSound(sound) {
    if (soundOn) sound.play();
  }

  const jackpotBox = document.querySelector(".jackpot-display");
  function flashGlow() {
    jackpotBox.classList.add("glow-border");
    setTimeout(() => jackpotBox.classList.remove("glow-border"), 1000);
  }

  // Hook into deposit button
  const oldHandler = window.onload || function(){};
  window.onload = function() {
    oldHandler();
    const btn = document.getElementById("connectBtn");
    if (!btn) return;

    const originalClick = btn.onclick;
    btn.onclick = async function(e) {
      const previousStatus = document.getElementById("status").innerText;
      await originalClick?.(e);
      const newStatus = document.getElementById("status").innerText;
      if (newStatus.includes("Deposit successful")) {
        playSound(coinSound);
        flashGlow();
      } else if (newStatus.includes("failed") || newStatus.includes("Error")) {
        playSound(errorSound);
      }
    }
  };
</script>

<script>
  let musicOn = true;
  const bgMusic = document.getElementById("bgMusic");
  const musicToggle = document.getElementById("toggleMusic");

  musicToggle.addEventListener("click", () => {
    musicOn = !musicOn;
    if (musicOn) {
      bgMusic.play();
      musicToggle.innerText = "üéµ Music: On";
    } else {
      bgMusic.pause();
      musicToggle.innerText = "üîá Music: Off";
    }
  });

  window.addEventListener("load", () => {
    if (musicOn) bgMusic.play();

    // Add spinning slot machine visual
    const header = document.querySelector(".jackpot-display");
    const spinner = document.createElement("div");
    spinner.id = "slotSpinner";
    spinner.innerText = "üé∞";
    header.prepend(spinner);
  });

  function showCoinBurst() {
    const burst = document.createElement("div");
    burst.className = "coin-burst";
    burst.innerText = "ü™ôü™ôü™ô";
    document.body.appendChild(burst);
    setTimeout(() => document.body.removeChild(burst), 800);
  }

  const jackpotBox = document.querySelector(".jackpot-display");

  async function checkFlameEffect(web3, contract) {
    const usdJackpot = await contract.methods.getJackpotUsd().call();
    const target = await contract.methods.TARGET_USD().call();
    if (parseFloat(usdJackpot) >= parseFloat(target)) {
      jackpotBox.classList.add("hot-flame");
    } else {
      jackpotBox.classList.remove("hot-flame");
    }
  }

  const originalClickFn = document.getElementById("connectBtn")?.onclick;
  document.getElementById("connectBtn").onclick = async function(e) {
    const previousStatus = document.getElementById("status").innerText;
    await originalClickFn?.(e);
    const newStatus = document.getElementById("status").innerText;
    if (newStatus.includes("Deposit successful")) {
      playSound(coinSound);
      flashGlow();
      showCoinBurst();
    } else if (newStatus.includes("failed") || newStatus.includes("Error")) {
      playSound(errorSound);
    }

    // Also check if we should show flame
    if (window.web3 && window.contract) {
      checkFlameEffect(window.web3, window.contract);
    }
  };
</script>

</body>
</html>

</html>

</html>
